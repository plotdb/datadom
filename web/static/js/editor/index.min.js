!function(){var n,e,r,t,i;n={},e=new sharedbWrapper,r=function(e,r){var t;return json0.type.apply(n.data,e),t=ld$.find("[ld=remote]",0),t.innerHTML="",datadom.deserialize(n.data,i).then(function(n){var e,r,i;return e=n.node,n.promise,t.appendChild(e),r="//- pug\n"+html2pug(t.innerHTML,{fragment:!0}),i=ld$.find("[ld=pug]",0),i.innerText=r})},t={name:"plugin-test",version:"0.0.1",serialize:function(n){var e,r,t;return e=n.data,r=n.node,t=n.plugins,n.window,Promise.all(Array.from(r.childNodes).map(function(n,e){return datadom.serialize(n,t)})).then(function(n){return e.child=e.child.concat(n.map(function(n){return n.data})),Promise.all(n.map(function(n){return n.promise}))})},deserialize:function(n){var e;return n.data,e=n.node,n.plugs,n.plugins,n.window,e},create:function(){return console.log("create")}},i=[t],new ldView({root:document.body,action:{click:{"load-ce":function(){return fs.writeFileSync("blank",'//- pug\ndiv(dd-plugin="plugin-test@0.0.1") hi'),n.ed.setFiles(fs),n.ed.open("blank"),n.ed.render()}}}}),e.get({id:"sample",watch:r,create:function(){return{}}}).then(function(e){return n.doc=e,n.data=JSON.parse(JSON.stringify(e.data)),getfa("sample").then(function(r){var t,d;return n.fs=r,r.writeFileSync("blank","//- pug\nh1 hello world!"),t=function(n){var r;return r=document.createElement("div"),r.innerHTML=n,datadom.serialize(r,i).then(function(n){var e;return e=n.data,n.promise.then(function(){return e})}).then(function(n){var r,t,d;return r=ld$.find("[ld=json]",0),r.innerText=JSON.stringify(n,null,2),t=ld$.find("[ld=dom]",0),datadom.deserialize(n,i).then(function(n){var e;return e=n.node,n.promise,t.innerHTML="",t.appendChild(e)}),d=json0.diff(e.data,n),e.submitOp(d)})},n.ed=d=new Editor({node:{edit:"[ld=editor]",view:"[ld=viewer]"},editlet:{},renderer:function(n){var e,r,i,d,a;if(e=n.fs){r={html:e.readFileSync("blank").toString()};for(i in r)d=r[i],(a=transpiler.detect(d)).mod&&a.mod.transform&&(r[i]=a.mod.transform(d)),t(r.html);return r}}}),d.setFiles(r),d.open("blank")})})}();